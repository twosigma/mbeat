.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "MBEAT_PUB" "8" "August 2017" "" ""
.
.SH "NAME"
\fBmbeat_pub\fR \- multicast heartbeat publisher
.
.SH "SYNOPSIS"
\fBmbeat_pub\fR [\fB\-b\fR \fIBSZ\fR] [\fB\-c\fR \fICNT\fR] [\fB\-h\fR] [\fB\-i\fR \fIMS\fR] [\fB\-l\fR] [\fB\-s\fR \fISID\fR] [\fB\-t\fR \fITTL\fR] \fIiface\fR=\fImaddr\fR:\fImport\fR [iface=maddr:mport \.\.\.]
.
.SH "DESCRIPTION"
The \fBmbeat_pub\fR utility publishes multicast UDP datagrams to a set of network endpoints\. It can be used in conjunction with the \fBmbeat_sub(8)\fR utility to test and debug network configurations\.
.
.SH "OPTIONS"
The utility accepts the following command\-line options:
.
.TP
\fB\-b\fR \fIBSZ\fR
Sets the socket send buffer size to \fIBSZ\fR bytes\. If not specified, the value defaults to the Linux kernel default\.
.
.TP
\fB\-c\fR \fICNT\fR
Sets the number of outgoing datagrams per endpoint to \fICNT\fR\. If not specified, the value defaults to 5\.
.
.TP
\fB\-h\fR
Prints the usage message\.
.
.TP
\fB\-i\fR \fIMS\fR
Sets the interval between outgoing datagrams per endpoint to \fIMS\fR milliseconds\. If not specified, the value defaults to 1000\.
.
.TP
\fB\-l\fR
Enables local loopback for published multicast datagrams\.
.
.TP
\fB\-s\fR \fISID\fR
Sets the session ID of each outgoing mbeat payload to \fISID\fR (see SESSION IDENTIFICATION)\. If not specified, a random value is generated\.
.
.TP
\fB\-t\fR \fITTL\fR
Sets the Time\-To\-Live property of each outgoing datagram to \fITTL\fR\. If not specified, the value defaults to 64\.
.
.SH "ENDPOINTS"
The positional arguments of the utility are endpoints: an ordered tuple consisting of local interface name, multicast group and the multicast port\. It is possible to specify up to 2048 endpoints per publisher\.
.
.SH "SESSION IDENTIFICATION"
In order to support multiple simultaneous runs of the tool, the publisher can stamp the payload with a session ID \- a 32\-bit unsigned integer \- that identifies the set of outgoing packets\. Similarly the subscriber utility is able to filter out everything but a given session ID\.
.
.SH "PAYLOAD FORMAT"
The format of the payload is binary\. All numeric fields are unsigned integers in network byte order\. The total payload size is 108 bytes\.
.
.P
Each payload contains the following fields in order:
.
.IP "\(bu" 4
format version number (2 bytes)
.
.IP "\(bu" 4
multicast port (2 bytes)
.
.IP "\(bu" 4
multicast group (4 bytes)
.
.IP "\(bu" 4
sequence number (4 bytes)
.
.IP "\(bu" 4
session ID (4 bytes)
.
.IP "\(bu" 4
local interface name (16 bytes)
.
.IP "\(bu" 4
local host name (64 bytes)
.
.IP "\(bu" 4
time of departure UNIX timestamp (8 bytes)
.
.IP "\(bu" 4
time of departure nanoseconds part (4 bytes)
.
.IP "" 0
.
.SH "RETURN VALUE"
The process returns \fI0\fR on success, \fI1\fR on failure\. Warnings and errors are printed to standard error\.
.
.SH "SEE ALSO"
mbeat_sub(8)
